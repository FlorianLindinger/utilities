# =================================================
# Ruff (python linter/formatter) configuration file
# =================================================

# (Global settings go at the top)
# Explicitly set the cache to a relative folder. 
# This stops Ruff from searching for %USERPROFILE% to store its cache.
cache-dir = ".ruff_cache"

# files to check/correct
include = ["*.py", "*.pyi", "*.pyw", "*.ipynb"]
# files to exclude from check/correct
exclude = [
  ".git",
  ".mypy_cache",
  ".ruff_cache",
  "__pycache__",
  "**/*.build",
  "**/*.dist",
]

# max line length before wrapping
line-length = 120

# file specific rule ignores (keep above "[lint]"):
[lint.per-file-ignores]
"**/*.ipynb" = [
  "F403",  # allow * import in notebooks
  "F405",  # allow * import in notebooks
  "E703",  # allow for useless semicolons
]

[lint]
# Rule families to enable:
select = [
  "A",     # shadowing Python built-ins
  "ARG",   # unused function params
  "ASYNC", # bad async usage
  "B",     # likely bugs and design problems
  "BLE",   # no bare "except:" & too broad Exception
  "C4",    # cleaner comprehensions & generators
  "COM",   # comma placement
  "D",     # require docstrings & docstrings style
  "DTZ",   # timezone-naive datetime usage
  "E",     # major style issues and syntax correctness
  "EM",    # uninformative/inconsistent error messages
  "EXE",   # executable permissions & shebangs
  "F",     # syntactically valid but logically wrong or unused
  "FBT",   # Boolean design issues
  "G",     # Logging misuse
  "I",     # import sorting
  "ICN",   # enfores alias conventions for imports
  "N",     # naming conventions
  "PERF",  # performance issues
  "PIE",   # small correctness & simplification checks
  "PL",    # pylint logic/safety rules
  "Q",     # Enforce single/double quote style 
  "RET",   # Ensures consistent return patterns in functions
  "RSE",   # correct raise syntax
  "RUF",   # Ruffâ€™s improvements & performance rules
  "S",     # security checks
  "SIM",   # Simplifies redundant conditionals & loops
  "SLF",   # access to private attributes of other classes
  "T10",   # Flag leftover debug statements
  "T20",   # Flag leftover print statements
  "TC",    # move import only needed for type checking
  "TID",   # Catches circular or disallowed imports
  "TRY",   # bad exception handling
  "UP",    # Updates syntax for newer Python versions
  "W",     # minor style issues
  "YTT",   # Catch obsolete sys.version comparisons & old idioms

  # Temporarily disable the following rule families:
  # "PT",      # good patterns in Pytest tests
]

# general rule ignores:
ignore = [
  "B905",    # allow for zip without explicit strict setting
  "BLE001",  # don't replace "try ... except: pass" #3
  "COM812",  # require trailing comma (formatter handles)
  "D100",    # allow missing docstring in public module
  "D102",    # allow missing docstring in public method
  "D105",    # allow missing docstring in magic method
  "D106",    # allow missing docstring in public nested class
  "D107",    # allow missing docstring in public __init__
  "D200",    # allow one-liner docstrings on multiple lines
  "D202",    # allow blank lines after docstring
  "D203",    # allow for lack of blank line before class docstring
  "D204",    # allow  blank line after class docstring
  "D205",    # allow 1 blank line after summary in docstring
  "D209",    # allow docstring closing quotes on same line
  "D211",    # allow blank line before class docstring
  "D212",    # allow docstring to start on second line
  "D213",    # allow multi-line docstring summary to start at the second line
  "D400",    # allow no period at end of first line
  "D401",    # allow non imperative mood in docstrings
  "D402",    # allow function signature in first line of docstring
  "D403",    # allow no capitalized docstring first letter
  "D404",    # allow doctstring to start with "This"
  "D405",    # allow docstring sections to be uncapitalized
  "D406",    # allow for non-newline chragacter after docstring section headers
  "D407",    # allow for no underline for docstring section headers
  "D408",    # missing-section-underline-after-name
  "D409",    # mismatched-section-underline-length 
  "D410",    # allow missing blank line after "Args" section
  "D411",    # allow missing blank line before "Warnings" section
  "D412",    # blank-lines-between-header-and-content 
  "D413",    # allow for missing blank line after last docstring section
  "D415",    # allow no .?! at end of first line in docstring
  "E402",    # allow imports not at top
  "E501",    # max line length handled via formatter
  "E712",    # allow `== True/False`
  "E741",    # allow variable names that look like l, O, or I"
  "EM101",   # allow for strings in error message
  "EM102",   # allow f-string in exception message
  "FBT001",  # allow boolean parameters when type hinting
  "FBT002",  # allow boolean parameters when defining
  "FBT003",  # allow boolean positions args when calling
  "N801",    # capitalize classes
  "N802",    # allow for lowercase functions
  "N803",    # allow for lowercase parameters
  "N806",    # allow for capitalization inside function variable
  "N812",    # allow any capitalization when renaming import #2
  "N813",    # allow any naming convention for import rename
  "N816",    # allow mixed capitalization in global variable label
  "PERF203", # allow try/except in loop
  "PLR0911", # allow too many returns
  "PLR0912", # too many branches in function/method
  "PLR0913", # too many function parameters
  "PLR0915", # too many statements in function/method
  "PLR1730", # allow for comparison where max/min would have worked
  "PLR2004", # allow for numbers in comparison
  "PLR5501", # allow for "else: if" instead of "elif"
  "PLW0120", # allow for redundant else after for
  "PLW0603", # allow for use of globals
  "PLW1510", # allow to not define "check" arg for "subprocess" function
  "PLW2901", # allow for redefinition of iterated elem in for loops
  "RET504",  # allow for unnecessary new variable before return
  "RET505",  # allow for unnecessary else before return
  "RET506",  # allow for unnecessary else after raise
  "RET507",  # allow for unnecessary else after continue
  "RET508",  # allow for unnecessary else after break
  "RUF005",  # allow for list addition
  "S101",    # allow for "assert"
  "S110",    # don't replace "try ... except: pass" #2
  "S112",    # allow try-except-continue block
  "S607",    # allow relative paths for starting a process
  "SIM102",  # allow for if "a: if b" instead of "if a and b"
  "SIM103",  # allow for explicit "return True/False"
  "SIM105",  # don't replace "try ... except: pass"
  "SIM108",  # allow if else in >1 line if one-liner possible
  "SIM110",  # allow "for+if" instead of "any+for"
  "T201",    # allow print
  "TRY002",  # allow for "Exception"
  "TRY003",  # allow for long error message
  "TRY300",  # allow unnecessary many line-including try-excepts
  "TRY301",  # allow for not encapsulated raise in try-except
  "UP009",   # allow python file encoding declaration
  "UP028",   # don't replace for+yield with "yield from"
  "W293",    # allow whitespace in empty line (for indented multiline str)
]
